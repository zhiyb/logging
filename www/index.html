<html>
<head>
<title>Logging index page</title>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="icon" type="image/svg+xml" href="/boo_vector_art.svg">
</head>
<body>
<script>
const key = "guest";
document.write(`<h1>Hosts - ${key}</h1><div id="hosts"/>`);

let xmlHttp = new XMLHttpRequest();
xmlHttp.onreadystatechange = function() {
  if (xmlHttp.readyState == 4 && xmlHttp.status == 200) {
    const hosts = JSON.parse(xmlHttp.responseText);
    const div = document.getElementById('hosts');
    for (const [k, v] of Object.entries(hosts)) {
      let html = "";
      for (const h of v.hosts)
        html += `<a href="graph_${k}.html?h=${h}">${h}</a><br/>`;
      div.innerHTML += `<h2>${v.desc}</h2><pre style="font-size:150%">${html}</pre>`;
    }
  }
}
xmlHttp.open("GET", `client.php?key=${key}`, true); // true for asynchronous
xmlHttp.send(null);
</script>
</body>
</html>
